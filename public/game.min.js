var Redux;!function(Redux){var Game=function(){function Game(){this.game=new Phaser.Game(1600,900,Phaser.AUTO,"main-game",{preload:this.preload,create:this.create})}return Game.prototype.preload=function(){this.game.load.atlasXML("sprite_complete","assets/graphics/sprites/spritesheet_complete.png","assets/graphics/sprites/spritesheet_complete.xml"),this.game.load.atlasXML("red_buttons","assets/graphics/sprites/redSheet.png","assets/graphics/sprites/redSheet.xml"),this.game.load.image("blue_desert","assets/graphics/backgrounds/blue_desert.png"),this.game.load.image("blue_grass","assets/graphics/backgrounds/blue_grass.png"),this.game.load.image("blue_land","assets/graphics/backgrounds/blue_land.png"),this.game.load.image("blue_shroom","assets/graphics/backgrounds/blue_shroom.png"),this.game.load.image("colored_desert","assets/graphics/backgrounds/colored_desert.png"),this.game.load.image("colored_grass","assets/graphics/backgrounds/colored_grass.png"),this.game.load.image("colored_land","assets/graphics/backgrounds/colored_land.png"),this.game.load.image("colored_shroom","assets/graphics/backgrounds/colored_shroom.png")},Game.prototype.create=function(){this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.world.enableBody=!0,window.innerWidth>768&&window.innerWidth/window.innerHeight>1?this.game.state.add("Menu",ReduxMain.Menu,!0):this.game.state.add("Incompatible",ReduxIncompatible.Incompatible,!0)},Game}();Redux.Game=Game}(Redux||(Redux={}));var Game=Redux.Game,__extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ReduxIncompatible;!function(ReduxIncompatible){var Incompatible=function(_super){function Incompatible(){_super.call(this)}return __extends(Incompatible,_super),Incompatible}(Phaser.State);ReduxIncompatible.Incompatible=Incompatible}(ReduxIncompatible||(ReduxIncompatible={}));var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},ReduxMain;!function(ReduxMain){var Menu=function(_super){function Menu(){_super.call(this),this.map=["--------------------------------------------------","                                                  ","                                                  ","                                                  ","                                                  ","                   _    _          = = =     _    ","    )(       )====                 + + +  s   )==(","====/\\]  [] [/++++  _ _ _ [] [] [] + + + == [=/++\\=","--------------------------------------------------"],this.tileMap={},this.entityMap={}}return __extends(Menu,_super),Menu.prototype.create=function(){this.game.world.setBounds(0,0,6400,896),this.background=this.game.add.tileSprite(0,-window.innerHeight/10,5*this.game.width,2*this.game.height,"colored_desert"),this.title=this.game.add.text(this.game.width/2+3*this.game.width,this.game.height/2,"Redux",{font:"32px Arial"}),this.createMap(),this.entity=this.game.add.sprite(this.game.width/2,this.game.height/2,""),this.game.camera.x+=3*this.game.width,this.entityMap.worm=this.game.add.sprite(3*this.game.width,0,"sprite_complete"),this.entityMap.worm.animations.add("move",Phaser.Animation.generateFrameNames("wormPink",1,2,".png"),2,!0),this.entityMap.worm.animations.play("move"),this.entityMap.worm.body.gravity.y+=9.8},Menu.prototype.createMap=function(){for(var i=0;i<this.map.length;i++)for(var j=0;j<this.map[i].length;j++)"-"==this.map[i][j]||"+"==this.map[i][j]?this.createTileOnMap(0+128*j,128*i-128,"sprite_complete","grassCenter.png",!0):"="==this.map[i][j]?this.createTileOnMap(0+128*j,128*i-128,"sprite_complete","grassMid.png",!0):"]"==this.map[i][j]?this.createTileOnMap(0+128*j,128*i-128,"sprite_complete","grassRight.png",!0):"["==this.map[i][j]?this.createTileOnMap(0+128*j,128*i-128,"sprite_complete","grassLeft.png",!0):"/"==this.map[i][j]?this.createTileOnMap(0+128*j,128*i-128,"sprite_complete","grassCorner_right.png",!0):"\\"==this.map[i][j]?this.createTileOnMap(0+128*j,128*i-128,"sprite_complete","grassCorner_left.png",!0):"("==this.map[i][j]?this.createTileOnMap(0+128*j,128*i-128,"sprite_complete","grassHill_left.png",!0):")"==this.map[i][j]?this.createTileOnMap(0+128*j,128*i-128,"sprite_complete","grassHill_right.png",!0):"_"==this.map[i][j]&&this.createTileOnMap(0+128*j,128*i-128,"sprite_complete","grass.png",!0)},Menu.prototype.createTileOnMap=function(x,y,spriteSheet,spriteFrame,immovable){var tile=this.game.add.sprite(x,y,spriteSheet);tile.frameName=spriteFrame,tile.body.immovable=immovable,null==this.tileMap[spriteSheet]?this.tileMap[spriteSheet]={}:null==this.tileMap[spriteSheet][spriteFrame]?this.tileMap[spriteSheet][spriteFrame]={}:null==this.tileMap[spriteSheet][spriteFrame][x]?this.tileMap[spriteSheet][spriteFrame][x]={}:this.tileMap[spriteSheet][spriteFrame][x][y]=tile},Menu.prototype.beautifyText=function(text){},Menu.prototype.update=function(){var _this=this;for(var spriteSheet in this.tileMap)for(var sprite in this.tileMap[spriteSheet])for(var x in this.tileMap[spriteSheet][sprite])for(var y in this.tileMap[spriteSheet][sprite][x]){var tile=this.tileMap[spriteSheet][sprite][x][y];for(var entity in this.entityMap)console.log(this.entityMap[entity].body.velocity),this.game.physics.arcade.collide(entity,tile,function(entity,tile){_this.entityMap[entity].body.velocity=0})}this.background.tilePosition.x-=2},Menu.prototype.createDebugString=function(){return"Game properties:\nWidth: "+this.game.width+"\nHeight: "+this.game.height+"\nBackground properties:\nWidth: "+this.background.width+"\nHeight: "+this.background.height},Menu}(Phaser.State);ReduxMain.Menu=Menu}(ReduxMain||(ReduxMain={}));